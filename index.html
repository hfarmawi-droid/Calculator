<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Compound Interest Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- DM Sans font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
  .fv-results-card,
  .fv-results-card h2 {
    font-family: Cambria, "Times New Roman", serif;
  }

  /* About page layout – two columns, no card box */
  .about-container {
    display: flex;
    align-items: flex-start;
    gap: 2.5rem;
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem 0;
  }

  .about-text {
    flex: 1.2;
    font-size: 1rem;
    line-height: 1.55;
  }

  .about-text h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1.7rem;
  }

  .about-photo {
    flex: 1;
    max-width: 350px;
    object-fit: cover;
    border-radius: 0;
    margin-top: 3.5rem;
  }

  * { box-sizing: border-box; }

  html { scroll-behavior: smooth; }

  body {
    margin: 0;
    font-family: "DM Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f5f5f7;
    color: #111827;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* HEADER + TABS */

  .app-header {
    background: #f5f5f7;
    border-bottom: 0px solid #e5e7eb;
    position: sticky;
    top: 0;
    z-index: 10;
    backdrop-filter: blur(10px);
  }

  .header-divider {
    max-width: 0;
    margin: 0.7rem auto 0.2rem;
    border-bottom: 1px solid #e5e7eb;
  }

  .tabs-bar {
    max-width: 1160px;
    margin: 0.25rem auto 0.5rem;
    display: flex;
    justify-content: center;
    gap: 2rem;
  }

  .tab {
    border: none;
    background: transparent;
    padding: 0.4rem 0;
    font-size: 0.9rem;
    font-weight: 400;
    color: #6b7280;
    cursor: pointer;
    position: relative;
    font-family: inherit;
  }

  .tab::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 2px;
    background: transparent;
    transform-origin: center;
    transform: scaleX(0.2);
    transition: background 150ms ease, transform 150ms ease;
  }

  .tab.active {
    color: #111827;
    font-weight: 500;
  }

  main {
    flex: 1;
    padding: 0.75rem 1rem 2.5rem;
    display: flex;
    justify-content: center;
  }

  .page {
    width: 100%;
    max-width: 1160px;
    display: none;
    flex-direction: column;
    gap: 1rem;
    opacity: 0;
    transition: opacity 220ms ease;
  }

  .page.active {
    display: flex;
    opacity: 1;
  }

  /* FV content (Home) */

  .fv-content {
    margin-top: 2.5rem;
    opacity: 1;
    transform: none;
  }

  /* CARDS AND GRID */

  .card {
    background: #ffffff;
    border-radius: 0px;
    padding: 1.25rem 1.5rem;
    box-shadow: 0 16px 32px rgba(15, 23, 42, 0.06);
    border: 1px solid #e5e7eb;
  }

  .fv-main-card {
    padding: 1.4rem 1.6rem 1.4rem;
    margin-bottom: 2rem;
  }

  .fv-main-grid {
    display: grid;
    grid-template-columns: minmax(0, 0.9fr) minmax(0, 2.1fr);
    gap: 1.75rem;
    align-items: stretch;
  }

  .fv-inputs-column,
  .fv-chart-column {
    display: flex;
    flex-direction: column;
  }

  .fv-results-card {
    margin-top: 1rem;
  }

  .fv-results-card h2 {
    text-align: center;
  }

  .fv-inputs-column h2,
  .fv-chart-column h2 {
    margin-top: 0;
    margin-bottom: 0.75rem;
    font-size: 1.1rem;
  }

  .tagline {
    font-size: 0.9rem;
    color: #6b7280;
    margin: 0 0 0.6rem;
  }

  label {
    display: block;
    margin-top: 0.75rem;
    font-weight: 500;
    font-size: 0.9rem;
  }

  /* underline-only inputs */
  input,
  select {
    width: 100%;
    margin-top: 0.25rem;
    padding: 0.4rem 0 0.3rem;
    border: none;
    border-bottom: 1px solid #d1d5db;
    border-radius: 0;
    font-size: 0.95rem;
    font-family: inherit;
    outline: none;
    background: transparent;
    transition: border-bottom-color 120ms ease, background-color 120ms ease;
  }

  input:focus,
  select:focus {
    border-bottom-color: #111827;
    box-shadow: none;
    background: transparent;
  }

  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  input[type=number] { -moz-appearance: textfield; }

  .results p {
    margin: 0.2rem 0;
    font-size: 0.93rem;
  }

  .results strong { font-weight: 600; }

  .muted {
    color: #6b7280;
    font-size: 0.85rem;
    margin-top: 0.5rem;
  }

  /* Chart container */

  .chart-header {
    margin-top: 0;
    margin-bottom: 0.75rem;
  }

  .fv-chart-column .chart-header {
    text-align: center;
  }

  .chart-label {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #6b7280;
    margin-bottom: 0.15rem;
  }

  .chart-balance {
    font-size: 1.35rem;
    font-family: Cambria, Georgia, serif;
    font-weight: 700;
    color: #1CA46C;
  }

  .chart-wrapper {
    width: 750px;
    height: 750px;
    margin-top: 0 auto;
    flex: 1;
    display: flex;
  }


  .chart-area {
    position: relative;
    width: 100%;
    flex: 1;
    min-height: 360px;
    height: 100%;
  }

  .chart-area canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
  }

  /* About */

  .about h2 { margin-top: 0; }

  .about p {
    margin: 0.4rem 0;
    font-size: 0.95rem;
  }

  .pill {
    display: inline-flex;
    align-items: center;
    padding: 0.2rem 0.6rem;
    border-radius: 0px;
    background: #eff6ff;
    color: #1d4ed8;
    font-size: 0.78rem;
    font-weight: 600;
    margin-top: 1.6rem;
  }

  @media (max-width: 900px) {
    .fv-main-grid {
      grid-template-columns: minmax(0, 1fr);
    }
    .about-container {
      flex-direction: column;
      align-items: flex-start;
    }
    .about-photo {
      margin-top: 1.5rem;
      max-width: 100%;
      width: 100%;
    }
  }

  @media (min-width: 900px) {
    main { padding-inline: 2rem; }
  }
  </style>
</head>
<body>
  <!-- HEADER + TABS -->
  <header class="app-header">
    <div class="header-divider"></div>
    <nav class="tabs-bar">
      <button class="tab active" data-target="page-fv">Home</button>
      <button class="tab" data-target="page-baii">BA II Plus</button>
      <button class="tab" data-target="page-about">About</button>
    </nav>
  </header>

  <main>
    <!-- HOME / FV PAGE -->
    <section id="page-fv" class="page active">
      <div id="fv-content" class="fv-content">
        <!-- Main card: Inputs + Chart -->
        <div class="card fv-main-card">
          <div class="fv-main-grid">
            <!-- Left: Inputs -->
            <div class="fv-inputs-column">
              <h2></h2>

              <label>
                Initial investment (PV)
                <input type="text" id="pv" value="5000">
              </label>

              <label>
                Monthly contribution (PMT)
                <input type="text" id="pmt" value="500">
              </label>

              <label>
                Annual return (nominal %)
                <input type="number" id="rate" value="10.33" step="0.01">
              </label>

              <label>
                Annual inflation rate (%)
                <input type="number" id="inflation" value="3.66" step="0.01">
              </label>

              <label>
                Years invested
                <input type="number" id="years" value="35" min="1" step="1">
              </label>
            </div>

            <!-- Right: Chart -->
            <div class="fv-chart-column">
              <div class="chart-header">
                <div class="chart-label">Your ending balance</div>
                <div class="chart-balance" id="chart-balance">$0.00</div>
              </div>

              <div class="chart-wrapper">
                <div class="chart-area">
                  <canvas id="growthChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom: Results -->
        <div class="fv-results-card">
          <h2>Results</h2>
          <div class="results">
            <p><strong>Total Principal:</strong> <span id="fv-contrib">$0.00</span></p>
            <p><strong>Future Value (nominal):</strong> <span id="fv-total">$0.00</span></p>
            <p><strong>Total Interest (nominal):</strong> <span id="fv-interest">$0.00</span></p>
            <p><strong>Inflation-adjusted value:</strong> <span id="fv-real">$0.00</span></p>
            <p class="muted">
              Note: Unlike BA II Plus, this formula uses monthly instead of annual compounding. Contributions are treated as an annuity due
              (deposited at the beginning of each month).
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- BA II PLUS PAGE -->
    <section id="page-baii" class="page">
      <div class="card">
        <h2>BA II Plus — TVM Solver</h2>
        <p class="tagline">
          Annual compounding with annual end-of-year payments (ordinary annuity).
          Equivalent to BA II Plus with P/Y = 1, C/Y = 1, END mode.
        </p>

        <label>
          Solve for
          <select id="baii-solve-for">
            <option value="fv">FV (future value)</option>
            <option value="pv">PV (present value)</option>
            <option value="pmt">PMT (payment)</option>
            <option value="n">N (number of periods)</option>
            <option value="iy">I/Y (interest rate)</option>
          </select>
        </label>

        <label>
          N (years)
          <input type="number" id="baii-n" value="30" step="0.01" min="0">
        </label>

        <label>
          I/Y (annual %)
          <input type="number" id="baii-iy" value="8" step="0.01">
        </label>

        <label>
          PV
          <input type="text" id="baii-pv" value="0">
        </label>

        <label>
          PMT (annual)
          <input type="text" id="baii-pmt" value="5000">
        </label>

        <label>
          FV
          <input type="text" id="baii-fv" value="1000000">
        </label>
      </div>

      <div class="card">
        <h2>Result</h2>
        <div class="results">
          <p><strong>Solved for:</strong> <span id="baii-solved-name">FV</span></p>
          <p><strong>Value:</strong> <span id="baii-result-value">$0.00</span></p>
          <p class="muted">
            Uses textbook TVM formulas for annual compounding and annual payments. 
            Result should match BA II Plus for the same inputs and sign convention.
          </p>
        </div>
      </div>
    </section>

    <!-- ABOUT PAGE -->
    <section id="page-about" class="page">
      <div class="about-container">
        <div class="about-text">
          <h2>Hadi Farmawi</h2>

          <p>
            Hadi Farmawi is a junior accountancy student at Arizona State University. 
            He is building his professional brand in corporate accounting with a strong focus on finance.
          </p>

          <p>
            Hadi's interest in business began in high school when he completed Business 
            Management and Intro to Entrepreneurship. Before attending ASU, he earned an 
            Associate’s Degree in General Business at Mesa Community College (2024). 
            Between 2023 and 2024, he served as an office member for Arizona Cultural Academy where he 
            handled tuition receivables, basic journal entries, and T-accounts.
          </p>

          <p>
            Hadi's passion for finance and accounting is evident in his projects. He is currently managing 
            a $125K portfolio for a close relative and applying his studies to manage risk and return. 
            He is also redesigning a compound–interest calculator incorporating goal–seek analysis and the 
            Fisher equation. To accomplish these projects, Hadi relies on independent research and applies 
            concepts and frameworks from External Reporting I, Data Analytics, and Fundamentals of Finance.
          </p>

          <p>
            At ASU, Hadi completed a major research group project in ACC 340, where he contributed 
            to researching Deckers Brands’ economic moat, key risks, management, and profitability metrics (ROIC/ROA). 
            Outside of his curriculum, Hadi enjoys cooking, video editing, and exercising—interests that 
            strengthen discipline, attention to detail, and storytelling that he also brings to his financial work.
          </p>

          <p>
            After graduation, Hadi plans to begin a career in corporate accounting, with a long-term 
            interest in investment banking.
          </p>
        </div>

        <img src="hadi.jpg" class="about-photo" alt="Hadi Farmawi">
      </div>
    </section>
  </main>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
  // Make charts extra-crisp on zoom / high-DPI
  if (typeof Chart !== "undefined") {
    Chart.defaults.devicePixelRatio = Math.min(window.devicePixelRatio * 2, 3);
  }

  function formatCurrency(value) {
    return value.toLocaleString(undefined, {
      style: "currency",
      currency: "USD",
      maximumFractionDigits: 2
    });
  }

  // Currency helpers
  function parseCurrencyString(value) {
    if (typeof value !== "string") value = String(value ?? "");
    const cleaned = value.replace(/[^0-9.-]/g, "");
    const num = parseFloat(cleaned);
    return isNaN(num) ? 0 : num;
  }

  function formatCurrencyInput(num) {
    return "$" + num.toLocaleString("en-US", {
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    });
  }

  function setupCurrencyInput(input, onChange) {
    if (!input) return;

    const initial = parseCurrencyString(input.value);
    if (initial) {
      input.value = formatCurrencyInput(initial);
    }

    input.addEventListener("focus", () => {
      const numeric = parseCurrencyString(input.value);
      input.value = numeric ? numeric.toString() : "";
    });

    input.addEventListener("blur", () => {
      const numeric = parseCurrencyString(input.value);
      input.value = numeric ? formatCurrencyInput(numeric) : "";
      if (typeof onChange === "function") onChange();
    });
  }

  // ---- HOME / FV calculator: monthly compounding, annuity-due ----

  function computeExcelLike(PV, PMT, annualRate, inflationRate, years) {
    const i = annualRate;
    const inf = inflationRate;
    const nYears = years;
    const nMonths = nYears * 12;
    const r = i / 12;

    const iReal = (1 + i) / (1 + inf) - 1;
    const rReal = iReal / 12;

    const fvLumpNom = PV * Math.pow(1 + r, nMonths);

    let fvAnnuityNom = 0;
    if (r !== 0) {
      fvAnnuityNom = PMT * ((Math.pow(1 + r, nMonths) - 1) / r) * (1 + r);
    } else {
      fvAnnuityNom = PMT * nMonths;
    }

    const totalBalanceNom = fvLumpNom + fvAnnuityNom;
    const totalPrincipalNom = PV + PMT * nMonths;
    const totalInterestNom = totalBalanceNom - totalPrincipalNom;

    const fvLumpReal = PV * Math.pow(1 + rReal, nMonths);
    let fvAnnuityReal = 0;
    if (rReal !== 0) {
      fvAnnuityReal = PMT * ((Math.pow(1 + rReal, nMonths) - 1) / rReal) * (1 + rReal);
    } else {
      fvAnnuityReal = PMT * nMonths;
    }

    const totalBalanceReal = fvLumpReal + fvAnnuityReal;

    let totalPrincipalReal = PV;
    for (let k = 1; k <= nMonths; k++) {
      totalPrincipalReal += PMT / Math.pow(1 + inf, k / 12);
    }
    const totalInterestReal = totalBalanceReal - totalPrincipalReal;

    return {
      totalBalanceNom,
      totalPrincipalNom,
      totalInterestNom,
      totalBalanceReal,
      totalPrincipalReal,
      totalInterestReal
    };
  }

  const pvInput = document.getElementById("pv");
  const pmtInput = document.getElementById("pmt");
  const rateInput = document.getElementById("rate");
  const inflationInput = document.getElementById("inflation");
  const yearsInput = document.getElementById("years");

  const fvTotalEl = document.getElementById("fv-total");
  const fvContribEl = document.getElementById("fv-contrib");
  const fvInterestEl = document.getElementById("fv-interest");
  const fvRealEl = document.getElementById("fv-real");

  let growthChart = null;
  let chartLabels = [];
  const baseYear = new Date().getFullYear();

  function recalcFV() {
    const PV = parseCurrencyString(pvInput.value);
    const PMT = parseCurrencyString(pmtInput.value);
    const rate = (parseFloat(rateInput.value) || 0) / 100;
    const inflation = (parseFloat(inflationInput.value) || 0) / 100;
    const years = Math.max(parseFloat(yearsInput.value) || 0, 0);

    const res = computeExcelLike(PV, PMT, rate, inflation, years);

    fvTotalEl.textContent = formatCurrency(res.totalBalanceNom);
    fvContribEl.textContent = formatCurrency(res.totalPrincipalNom);
    fvInterestEl.textContent = formatCurrency(res.totalInterestNom);
    fvRealEl.textContent = formatCurrency(res.totalBalanceReal);

    const chartBalanceEl = document.getElementById("chart-balance");
    if (chartBalanceEl) {
      chartBalanceEl.textContent = formatCurrency(res.totalBalanceReal);
    }

    chartLabels = [];
    const nominalSeries = [];
    const realSeries = [];
    const principalSeries = [];

    for (let y = 0; y <= years; y++) {
      const lblYear = baseYear + y;
      chartLabels.push(lblYear.toString());
      const sub = computeExcelLike(PV, PMT, rate, inflation, y);
      nominalSeries.push(sub.totalBalanceNom);
      realSeries.push(sub.totalBalanceReal);
      principalSeries.push(sub.totalPrincipalNom);
    }

    const ctx = document.getElementById("growthChart").getContext("2d");

    if (growthChart) {
      growthChart.data.labels = chartLabels;
      growthChart.data.datasets[0].data = nominalSeries;
      growthChart.data.datasets[1].data = realSeries;
      growthChart.data.datasets[2].data = principalSeries;
      growthChart.update();
    } else {
      growthChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: chartLabels,
          datasets: [
            {
              label: "Nominal value",
              data: nominalSeries,
              borderColor: "#1E6BD6",
              backgroundColor: "rgba(30,107,214,0.16)",
              borderWidth: 2,
              tension: 0.25,
              pointRadius: 0,
              pointHoverRadius: 6,
              pointHoverBackgroundColor: "#1E6BD6",
              pointHoverBorderColor: "#ffffff",
              pointHoverBorderWidth: 2,
              pointStyle: "circle",
              fill: true
            },
            {
              label: "Inflation-adjusted value",
              data: realSeries,
              borderColor: "#1CA46C",
              backgroundColor: "rgba(28,164,108,0.16)",
              borderWidth: 2,
              tension: 0.25,
              pointRadius: 0,
              pointHoverRadius: 6,
              pointHoverBackgroundColor: "#1CA46C",
              pointHoverBorderColor: "#ffffff",
              pointHoverBorderWidth: 2,
              pointStyle: "circle",
              fill: true
            },
            {
              label: "Total principal",
              data: principalSeries,
              borderColor: "#6B7280",
              backgroundColor: "rgba(107,114,128,0.18)",
              borderWidth: 2,
              tension: 0,
              pointRadius: 0,
              pointHoverRadius: 6,
              pointHoverBackgroundColor: "#6B7280",
              pointHoverBorderColor: "#ffffff",
              pointHoverBorderWidth: 2,
              pointStyle: "circle",
              fill: false
            }
          ]
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          interaction: { mode: "index", intersect: false },
          plugins: {
            legend: {
              position: "bottom",
              labels: {
                usePointStyle: true,
                pointStyle: "circle",
                boxWidth: 32,
                boxHeight: 4,
                padding: 16
              }
            },
            tooltip: {
              backgroundColor: "rgba(255, 255, 255, 1)",
              titleColor: "#000",
              bodyColor: "#000",
              borderColor: "#ddd",
              borderWidth: 1,
              displayColors: true,
              padding: 12,
              cornerRadius: 0
            }
          },
          scales: {
            x: {
              title: { display: true, text: "Year" },
              grid: {
                display: false,
                drawBorder: false
              },
              ticks: {
                autoSkip: true,
                maxTicksLimit: 6
              }
            },
            y: {
              ticks: {
                callback: function(value) {
                  return "$" + (value / 1000).toFixed(0) + "k";
                }
              },
              grid: {
                color: "rgba(0,0,0,0.04)",
                drawBorder: false
              }
            }
          }
        }
      });
    }
  }

  // ---- BA II Plus TVM Solver (annual compounding, ordinary annuity) ----

  const baiiSolveFor = document.getElementById("baii-solve-for");
  const baiiNInput   = document.getElementById("baii-n");
  const baiiIyInput  = document.getElementById("baii-iy");
  const baiiPvInput  = document.getElementById("baii-pv");
  const baiiPmtInput = document.getElementById("baii-pmt");
  const baiiFvInput  = document.getElementById("baii-fv");

  const baiiSolvedNameEl  = document.getElementById("baii-solved-name");
  const baiiResultValueEl = document.getElementById("baii-result-value");

  function tvmFV(PV, PMT, r, N) {
    if (N <= 0) return PV;
    if (r === 0) return PV + PMT * N;
    const A = Math.pow(1 + r, N);
    return PV * A + PMT * ((A - 1) / r);
  }

  function recalcBAII() {
    const solveFor = baiiSolveFor.value;

    let N  = parseFloat(baiiNInput.value) || 0;
    let I  = parseFloat(baiiIyInput.value) || 0;
    let r  = I / 100;
    let PV = parseCurrencyString(baiiPvInput.value);
    let PMT= parseCurrencyString(baiiPmtInput.value);
    let FV = parseCurrencyString(baiiFvInput.value);

    let resultValue = null;
    let solvedName  = "";

    if (solveFor === "fv") {
      if (r === 0) {
        FV = PV + PMT * N;
      } else {
        const A = Math.pow(1 + r, N);
        FV = PV * A + PMT * ((A - 1) / r);
      }
      baiiFvInput.value = formatCurrencyInput(FV);
      resultValue = formatCurrency(FV);
      solvedName = "FV (future value)";
    } else if (solveFor === "pv") {
      if (r === 0) {
        PV = FV - PMT * N;
      } else {
        const A = Math.pow(1 + r, N);
        PV = (FV - PMT * ((A - 1) / r)) / A;
      }
      baiiPvInput.value = formatCurrencyInput(PV);
      resultValue = formatCurrency(PV);
      solvedName = "PV (present value)";
    } else if (solveFor === "pmt") {
      if (N === 0) {
        PMT = 0;
      } else if (r === 0) {
        PMT = (FV - PV) / N;
      } else {
        const A = Math.pow(1 + r, N);
        PMT = (FV - PV * A) * r / (A - 1);
      }
      baiiPmtInput.value = formatCurrencyInput(PMT);
      resultValue = formatCurrency(PMT);
      solvedName = "PMT (payment)";
    } else if (solveFor === "n") {
      if (r === 0) {
        if (PMT !== 0) {
          N = (FV - PV) / PMT;
        } else {
          N = 0;
        }
      } else {
        const num = FV * r + PMT;
        const den = PV * r + PMT;
        if (num > 0 && den > 0 && num !== den) {
          N = Math.log(num / den) / Math.log(1 + r);
        } else {
          N = 0;
        }
      }
      baiiNInput.value = N.toFixed(4);
      resultValue = N.toFixed(4) + " periods";
      solvedName = "N (number of periods)";
    } else if (solveFor === "iy") {
      // Solve for r numerically between 0% and 100%
      const maxIter = 50;
      let rate = 0.05; // initial guess 5%
      function f(rr) {
        return tvmFV(PV, PMT, rr, N) - FV;
      }
      for (let iter = 0; iter < maxIter; iter++) {
        const eps = 1e-5;
        const f1 = f(rate + eps);
        const f0 = f(rate - eps);
        const df = (f1 - f0) / (2 * eps);
        const fr = f(rate);
        if (!isFinite(df) || Math.abs(df) < 1e-12) break;
        const newRate = rate - fr / df;
        if (!isFinite(newRate) || newRate <= -0.9999 || newRate > 10) break;
        if (Math.abs(newRate - rate) < 1e-10) {
          rate = newRate;
          break;
        }
        rate = newRate;
      }
      if (!isFinite(rate) || rate < -0.9999) rate = 0;
      I = rate * 100;
      baiiIyInput.value = I.toFixed(4);
      resultValue = I.toFixed(4) + " %";
      solvedName = "I/Y (interest rate)";
    }

    baiiSolvedNameEl.textContent = solvedName;
    baiiResultValueEl.textContent = resultValue || "";
  }

  // Setup currency inputs
  setupCurrencyInput(pvInput, recalcFV);
  setupCurrencyInput(pmtInput, recalcFV);

  setupCurrencyInput(baiiPvInput, recalcBAII);
  setupCurrencyInput(baiiPmtInput, recalcBAII);
  setupCurrencyInput(baiiFvInput, recalcBAII);

  // Wire up inputs
  [rateInput, inflationInput, yearsInput].forEach(el => {
    el.addEventListener("input", recalcFV);
  });

  [baiiSolveFor, baiiNInput, baiiIyInput].forEach(el => {
    el.addEventListener("input", recalcBAII);
  });

  // Tabs
  const tabs = document.querySelectorAll(".tab");
  const pages = document.querySelectorAll(".page");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const targetId = tab.getAttribute("data-target");
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      pages.forEach(page => {
        if (page.id === targetId) {
          page.classList.add("active");
        } else {
          page.classList.remove("active");
        }
      });

      if (targetId === "page-fv") {
        recalcFV();
      } else if (targetId === "page-baii") {
        recalcBAII();
      }

      window.scrollTo({ top: 0, behavior: "auto" });
    });
  });

  // Initial calculations
  recalcFV();
  recalcBAII();
  </script>
</body>
</html>
